<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <title>数据热力图</title>
  <!-- echarts依赖js -->
  <script type="text/javascript" src="js/Plugin/echarts.min.js"></script>
  <!-- 地图显示依赖js -->
  <script type="text/javascript" src="js/Plugin/echarts-map-china.js"></script>
  <!-- jquery -->
  <script src="https://code.jquery.com/jquery-3.4.0.min.js"></script>
  <style>
    body,
    html {
      width: 100%;
      height: 100%;
    }

    .map {
      width: 90%;
      height: 90%;
    }

    #radarChart {
      width: 90%;
      height: 90%;

    }
  </style>
</head>

<body>
<div class="map">
  <div id="radarChart"></div>
</div>
</body>
<script type="text/javascript">
  // 雷达图
  var radarChart = echarts.init(document.getElementById('radarChart'));

  const data = {'上海': [622, 664, 719, 776, 824, 848, 837, 796, 741, 685, 635], '云南': [646, 679, 720, 764, 801, 820, 811, 779, 738, 694, 656], '内蒙古': [577, 638, 716, 798, 867, 903, 886, 826, 748, 667, 596], '北京': [582, 641, 716, 795, 862, 897, 881, 823, 748, 669, 600], '台湾': [651, 681, 721, 762, 796, 814, 806, 776, 737, 696, 660], '吉林': [560, 628, 715, 806, 884, 924, 905, 838, 751, 661, 581], '四川': [625, 666, 719, 775, 822, 845, 834, 794, 741, 685, 637], '天津': [586, 643, 717, 793, 858, 892, 876, 820, 747, 671, 604], '宁夏': [589, 645, 717, 792, 855, 888, 873, 818, 746, 672, 606], '安徽': [620, 663, 719, 777, 826, 851, 840, 797, 742, 684, 633], '山东': [598, 650, 717, 788, 847, 877, 863, 812, 745, 675, 614], '山西': [592, 647, 717, 790, 852, 884, 869, 816, 746, 673, 609], '广东': [653, 683, 721, 761, 795, 812, 804, 775, 737, 697, 662], '广西': [654, 683, 721, 760, 794, 810, 802, 774, 736, 697, 663], '新疆': [560, 629, 715, 806, 883, 924, 905, 837, 751, 661, 581], '江苏': [619, 662, 719, 778, 827, 852, 841, 798, 742, 683, 632], '江西': [633, 670, 719, 771, 814, 836, 826, 789, 740, 689, 644], '河北': [592, 647, 717, 791, 853, 885, 870, 816, 746, 673, 608], '河南': [607, 655, 718, 783, 838, 866, 853, 806, 744, 679, 622], '浙江': [626, 667, 719, 774, 820, 843, 833, 793, 741, 686, 638], '海南': [664, 689, 722, 756, 784, 799, 792, 768, 735, 701, 672], '湖北': [625, 666, 719, 775, 821, 845, 834, 794, 741, 686, 637], '湖南': [635, 672, 720, 770, 812, 833, 823, 787, 739, 689, 646], '澳门': [656, 685, 721, 759, 792, 808, 800, 773, 736, 698, 665], '甘肃': [601, 652, 718, 786, 844, 874, 860, 810, 745, 676, 616], '福建': [642, 676, 720, 766, 805, 824, 815, 782, 738, 692, 653], '西藏': [629, 668, 719, 773, 818, 840, 830, 791, 740, 687, 641], '贵州': [641, 675, 720, 767, 807, 826, 817, 783, 739, 692, 651], '辽宁': [572, 635, 716, 800, 872, 910, 892, 830, 749, 665, 591], '重庆': [629, 668, 719, 773, 817, 840, 829, 791, 740, 687, 641], '陕西': [609, 657, 718, 782, 836, 864, 851, 804, 743, 679, 624], '青海': [598, 651, 717, 787, 847, 877, 863, 812, 745, 675, 614], '香港': [656, 684, 721, 760, 792, 808, 801, 773, 736, 698, 664], '黑龙江': [548, 622, 714, 812, 895, 939, 918, 846, 753, 657, 571]};

  //默认雷达图省份
  var radarProvince1 = '上海';
  var radarProvince2 = '北京';

  const allmax = 960;
  const allmin = 540;
  var dataMax = [
    {
      name: '1月',
      min: 448,
      max: 714,
    },
    {
      name: '2月',
      min: 522,
      max: 739,
    },
    {
      name: '3月',
      min: 614,
      max: 772,
    },
    {
      name: '4月',
      min: 656,
      max: 862,
    },
    {
      name: '5月',
      min: 684,
      max: 945,
    },
    {
      name: '6月',
      min: 699,
      max: 989,
    },
    {
      name: '7月',
      min: 692,
      max: 968,
    },
    {
      name: '8月',
      min: 668,
      max: 896,
    },
    {
      name: '9月',
      min: 635,
      max: 803,
    },
    {
      name: '10月',
      min: 557,
      max: 751,
    },
    {
      name: '11月',
      min: 471,
      max: 722,
    },
  ]
  var radarOption ={
    // legend:{
    //   data: [radarProvince1, radarProvince2],
    // },
    radar:{
      indicator:dataMax,
      axisName: {
        color: '#fff',
        backgroundColor: '#666',
        borderRadius: 3,
        padding: [3, 5]
      }
    },
    series:[
      {
        type: 'radar',
        data: [
          {
            value: data[radarProvince1],
            name: radarProvince1,
            symbol: 'rect',
            symbolSize: 6,
            lineStyle: {
              type: 'dashed'
            },
            // label: {
            //   show: true,
            //   formatter: function (params) {
            //     return params.value;
            //   }
            // },
            itemStyle: {
              color: '#56a3f1'
            },
          },
          {
            value: data[radarProvince2],
            name: radarProvince2,
            symbol: 'circle',
            areaStyle: {
              color: new echarts.graphic.RadialGradient(0.1, 0.6, 1, [
                {
                  color: 'rgba(255, 145, 124, 0.1)',
                  offset: 0
                },
                {
                  color: 'rgba(255, 145, 124, 0.9)',
                  offset: 1
                }
              ])
            },
          }
        ]
      }
    ],
  }
  radarChart.setOption(radarOption);

  function updateRadarChart(){
    radarOption.series[0].data[0].name = radarProvince1;
    radarOption.series[0].data[0].value =data[radarProvince1];
    radarOption.series[0].data[1].name = radarProvince2;
    radarOption.series[0].data[1].value =data[radarProvince2];
    // radarOption.legend.data = [radarProvince1, radarProvince2];
  }
  function displaySelectedMap(selectedProvince1, selectedProvince2){
    radarProvince1 = selectedProvince1;
    radarProvince2 = selectedProvince2;
    updateRadarChart();
    console.log(radarOption);
    radarChart.setOption(radarOption, true);
  }
  window.addEventListener('message', function(event) {
    // 接收主页面发送的消息，根据消息内容选择显示的数据
    var selectedProvince1 = event.data.province1;
    var selectedProvince2 = event.data.province2;
    displaySelectedMap(selectedProvince1, selectedProvince2);
  });

</script>

</html>
